{% extends "header.html" %}
{% load static %}
{% load cloudinary %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/account.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="main-body">
        <div class="row gutters-sm">

            <div class="col-md-12">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">
                            <h4 class="mb-0">Current Pairings</h4>
                        </div>
                        <hr>

                        {% for pair in allpairings %}
                        <div class="row">
                            <div class="col-sm-10">
                                {% if pair.user3 is not none %}
                                <h6 class="mt-3">{{ pair.user1.first_name }} {{ pair.user1.last_name }} <small>paired
                                        with</small> {{ pair.user2.first_name }} {{ pair.user2.last_name }}
                                    <small>paired with</small> {{ pair.user3.first_name }} {{ pair.user3.last_name }}
                                </h6>
                                {% else %}
                                <h6 class="mt-3">{{ pair.user1.first_name }} {{ pair.user1.last_name }} <small>paired
                                        with</small> {{ pair.user2.first_name }} {{ pair.user2.last_name }}</h6>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}

                        <div class="row">
                            <div class="col-sm-6">
                                <a class="btn btn-outline-primary mt-4" href="edit_pairings/create_new">Create New
                                    Pairings</a>
                            </div>
                            <div class="col-sm-6">
                                <a class="btn btn-outline-primary mt-4 float-right" href="edit_pairings/push">Push
                                    Pairings</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="pt-md-5 pb-md-4">
                    <p class="text-secondary mb-1">Instructions for pairing:</p>
                    <br>
                    <p class="text-secondary mb-1">TLDR: Hit "Create New Pairings" to make a new set of pairings and
                        that you can see on this page. These pairings are only visible to you until you then "Push
                        Pairings",
                        at which point everybody will have their pair on their homescreen. It is way easier for me to
                        fix
                        any mistakes before pairings are pushed, so let me know if anything looks off.
                    </p>
                    <br>
                    <p class="text-secondary mb-1">Long version: This page is meant to act as a staging area where you
                        can create
                        pairings and verify that there are no obvious mistakes before pushing them. The "Create New
                        Pairings" button will find the pairing that maximizes a score based on crushes and not repeating
                        past pairings. There should be a shit ton of checks against pairing any strikes and worst case
                        it should
                        throw an error message telling you something went wrong. Pushing the "create new" button again
                        won't change
                        anything unless someone's preferences changed since the pairing should already be optimal. The
                        "Push Pairings"
                        buttons takes whatever pairings are currently displayed on this page and pushes them to
                        everyone. Don't hit
                        push multiple times or it will fuck with the weighting a little bit (nothing catastrophic) and
                        don't hit push
                        until
                        you're sure that the pairings are ok. If anything changes after pairings have already been
                        pushed it's a much
                        bigger
                        pain to deal with, but I will help you resolve whatever goes wrong, just text me at (720)
                        724-0751.
                    </p>
                    <br>
                    <p class="text-secondary mb-1">-Kyle :)</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}